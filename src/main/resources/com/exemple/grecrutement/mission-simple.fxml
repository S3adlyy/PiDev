<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.exemple.grecrutement.MissionController"
            stylesheets="@mission-styles.css"
            styleClass="mission-bg">

    <!-- Premium Header with Navigation -->
    <top>
        <VBox spacing="0">
            <!-- Status Bar -->
            <HBox alignment="CENTER" styleClass="mission-status-bar">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Circle radius="4" styleClass="mission-status-indicator"/>
                    <Label text="ðŸ” Connected â€¢ Live Data Sync" styleClass="mission-muted"/>
                </HBox>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="ðŸš€ v2.4.1 â€¢ Premium Edition" styleClass="mission-muted-dark"/>
            </HBox>

            <!-- Main Header -->
            <HBox alignment="CENTER_LEFT" styleClass="mission-header">
                <!-- Logo and Title -->
                <HBox spacing="20" alignment="CENTER_LEFT">
                    <StackPane>
                        <Rectangle width="50" height="50" arcWidth="12" arcHeight="12" styleClass="mission-logo"/>
                        <Label text="M" styleClass="mission-logo-text"/>
                    </StackPane>

                    <VBox spacing="3">
                        <Label text="Mission Management Platform" styleClass="mission-title-main"/>
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="ðŸ“Š Real-time Dashboard" styleClass="mission-title-sub"/>
                            <Rectangle width="4" height="4" arcWidth="2" arcHeight="2" style="-fx-fill: #BE95C4;"/>
                            <Label text="ðŸš€ High Performance" styleClass="mission-title-sub"/>
                        </HBox>
                    </VBox>
                </HBox>

                <Region HBox.hgrow="ALWAYS"/>

                <!-- AI Evaluation Button -->
                <HBox spacing="15" alignment="CENTER_RIGHT">
                    <Button text="ðŸ¤– AI Evaluation" onAction="#ouvrirEvaluationAI" styleClass="mission-btn-ai"/>

                    <!-- User Profile -->
                    <StackPane>
                        <Circle radius="22" styleClass="mission-avatar"/>
                        <Label text="ðŸ‘¤" styleClass="mission-avatar-text"/>
                    </StackPane>
                </HBox>
            </HBox>
        </VBox>
    </top>

    <!-- Center Content -->
    <center>
        <VBox spacing="25" style="-fx-padding: 30;">
            <!-- Dashboard Header -->
            <HBox spacing="20" alignment="CENTER_LEFT">
                <VBox spacing="8">
                    <Label text="ðŸ“ˆ Mission Analytics Dashboard" styleClass="mission-h1"/>
                    <Rectangle width="200" height="2" style="-fx-fill: linear-gradient(to right, #9F86C0, transparent);"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>

                <!-- Stats and Refresh -->
                <HBox spacing="15" alignment="CENTER_RIGHT">
                    <!-- Stats Cards -->
                    <HBox spacing="20">
                        <VBox alignment="CENTER" spacing="2" styleClass="mission-stats-card mission-scale-hover">
                            <Label text="42" styleClass="mission-stats-value"/>
                            <Label text="Total Missions" styleClass="mission-stats-label"/>
                        </VBox>
                        <VBox alignment="CENTER" spacing="2" styleClass="mission-stats-card mission-scale-hover">
                            <Label text="18" styleClass="mission-stats-value"/>
                            <Label text="Active" styleClass="mission-stats-label"/>
                        </VBox>
                    </HBox>

                    <!-- Refresh Button -->
                    <Button text="ðŸ”„ Refresh" onAction="#actualiserTableau" styleClass="mission-btn-outline"/>
                </HBox>
            </HBox>

            <!-- Table Container -->
            <VBox spacing="15" styleClass="mission-table-container">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Rectangle width="30" height="30" arcWidth="8" arcHeight="8"
                               style="-fx-fill: linear-gradient(to bottom right, #9F86C0, #5E548E);"/>
                    <Label text="Mission Repository" styleClass="mission-h2"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label text="ðŸŸ¢ Live Data Sync" styleClass="mission-footer-highlight"/>
                </HBox>

                <!-- Table -->
                <TableView fx:id="missionTable" styleClass="mission-table">
                    <columns>
                        <TableColumn text="ID" fx:id="idColumn" prefWidth="60">
                            <cellValueFactory>
                                <PropertyValueFactory property="id" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn text="Description" fx:id="descriptionColumn" prefWidth="250">
                            <cellValueFactory>
                                <PropertyValueFactory property="description" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn text="Score Min" fx:id="scoreColumn" prefWidth="100">
                            <cellValueFactory>
                                <PropertyValueFactory property="score_min" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn text="Date CrÃ©ation" fx:id="dateColumn" prefWidth="180">
                            <cellValueFactory>
                                <PropertyValueFactory property="created_at" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn text="CrÃ©Ã© par ID" fx:id="createdByColumn" prefWidth="100">
                            <cellValueFactory>
                                <PropertyValueFactory property="created_by_id" />
                            </cellValueFactory>
                        </TableColumn>
                    </columns>
                </TableView>
            </VBox>
        </VBox>
    </center>

    <!-- Form Section -->
    <bottom>
        <VBox spacing="20" styleClass="mission-form-container">
            <!-- Form Header -->
            <HBox alignment="CENTER_LEFT" spacing="15" styleClass="mission-form-header">
                <StackPane>
                    <Rectangle width="40" height="40" arcWidth="10" arcHeight="10"
                               style="-fx-fill: radial-gradient(center 50% 50%, radius 80%, #BE95C4, #9F86C0);"/>
                    <Label text="âœï¸" styleClass="mission-icon-large"/>
                </StackPane>
                <VBox spacing="3">
                    <Label text="Mission Configuration Panel" styleClass="mission-form-title"/>
                    <Label text="Create, modify, or delete mission entries" styleClass="mission-form-subtitle"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
                <HBox spacing="8" alignment="CENTER_RIGHT">
                    <Circle radius="6" styleClass="mission-status-indicator"/>
                    <Label text="System: Operational" styleClass="mission-footer-highlight"/>
                </HBox>
            </HBox>

            <!-- Form Grid -->
            <GridPane hgap="20" vgap="18" style="-fx-padding: 20 0;">
                <columnConstraints>
                    <ColumnConstraints prefWidth="140" halignment="RIGHT"/>
                    <ColumnConstraints prefWidth="320"/>
                    <ColumnConstraints prefWidth="200"/>
                </columnConstraints>

                <!-- Mission ID -->
                <Label text="Mission ID:" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="mission-form-label"/>
                <TextField fx:id="idField" editable="false" GridPane.columnIndex="1" GridPane.rowIndex="0" styleClass="mission-input"/>
                <Label text="Auto-generated unique identifier" GridPane.columnIndex="2" GridPane.rowIndex="0" styleClass="mission-form-hint"/>

                <!-- Description -->
                <Label text="Description:" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="mission-form-label"/>
                <TextField fx:id="descriptionField" GridPane.columnIndex="1" GridPane.rowIndex="1" styleClass="mission-input"/>
                <Label text="Enter detailed mission description" GridPane.columnIndex="2" GridPane.rowIndex="1" styleClass="mission-form-hint"/>

                <!-- Minimum Score -->
                <Label text="Minimum Score:" GridPane.columnIndex="0" GridPane.rowIndex="2" styleClass="mission-form-label"/>
                <TextField fx:id="scoreField" GridPane.columnIndex="1" GridPane.rowIndex="2" styleClass="mission-input"/>
                <Label text="Required score threshold (0-100)" GridPane.columnIndex="2" GridPane.rowIndex="2" styleClass="mission-form-hint"/>

                <!-- Creator ID -->
                <Label text="Creator ID:" GridPane.columnIndex="0" GridPane.rowIndex="3" styleClass="mission-form-label"/>
                <TextField fx:id="createdByIdField" GridPane.columnIndex="1" GridPane.rowIndex="3" styleClass="mission-input"/>
                <Label text="User ID of mission creator" GridPane.columnIndex="2" GridPane.rowIndex="3" styleClass="mission-form-hint"/>
            </GridPane>

            <!-- Action Buttons -->
            <HBox spacing="20" alignment="CENTER" style="-fx-padding: 10 0 20 0;">
                <Button text="âž• Add Mission" onAction="#ajouterMission" styleClass="mission-btn"/>
                <Button text="âœï¸ Edit Mission" onAction="#modifierMission" styleClass="mission-btn"/>
                <Button text="ðŸ—‘ï¸ Delete Mission" onAction="#supprimerMission" styleClass="mission-btn"/>
                <Button text="ðŸ§¹ Clear Form" onAction="#viderChamps" styleClass="mission-btn-outline"/>
            </HBox>

            <!-- Footer -->
            <HBox alignment="CENTER" spacing="20" styleClass="mission-footer">
                <HBox spacing="10" alignment="CENTER">
                    <Label text="âš¡" styleClass="mission-icon"/>
                    <Label text="High-Performance Mission Management Platform" styleClass="mission-footer-highlight"/>
                </HBox>
                <Rectangle width="2" height="15" styleClass="mission-separator"/>
                <Label text="Â© 2024 Carrieri Recrutement Technologies" styleClass="mission-footer-text"/>
                <Rectangle width="2" height="15" styleClass="mission-separator"/>
                <HBox spacing="8" alignment="CENTER">
                    <Label text="ðŸ”’" styleClass="mission-icon"/>
                    <Label text="Enterprise Security Certified" styleClass="mission-footer-text"/>
                </HBox>
            </HBox>
        </VBox>
    </bottom>
</BorderPane>