<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.shape.Circle?>

<StackPane xmlns="http://javafx.com/javafx/17"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.exemple.grecrutement.MissionListController"
           stylesheets="@mission-list-styles.css"
           style="-fx-background-color: linear-gradient(from 0% 0% to 100% 100%, #0a66c2 0%, #378fe9 50%, #8b5cf6 100%);">

    <!-- Background Circles -->
    <Circle radius="60" styleClass="circle-large" fill="rgba(255,255,255,0.1)">
        <translateY>50</translateY>
        <translateX>-100</translateX>
    </Circle>

    <Circle radius="40" styleClass="circle-medium" fill="rgba(255,255,255,0.08)">
        <translateY>-100</translateY>
        <translateX>150</translateX>
    </Circle>

    <Circle radius="80" styleClass="circle-small" fill="rgba(255,255,255,0.05)">
        <translateY>100</translateY>
        <translateX>200</translateX>
    </Circle>

    <!-- Main Container -->
    <VBox styleClass="mission-list-container">
        <!-- Header -->
        <VBox styleClass="mission-list-header">
            <Label text="ðŸ“‹ Mission List" styleClass="mission-list-title"/>
            <Label text="Manage and review all available missions" styleClass="mission-list-subtitle"/>
        </VBox>

        <!-- Stats Cards -->
        <HBox styleClass="stats-container">
            <VBox styleClass="stats-card">
                <Label fx:id="lblTotalMissions" text="0" styleClass="stats-value"/>
                <Label text="Total Missions" styleClass="stats-label"/>
            </VBox>
            <VBox styleClass="stats-card">
                <Label fx:id="lblAvgScore" text="0%" styleClass="stats-value"/>
                <Label text="Avg. Min Score" styleClass="stats-label"/>
            </VBox>
            <VBox styleClass="stats-card">
                <Label fx:id="lblActiveMissions" text="0" styleClass="stats-value"/>
                <Label text="Active" styleClass="stats-label"/>
            </VBox>
        </HBox>

        <!-- Table Container -->
        <VBox styleClass="table-container">
            <!-- Table -->
            <TableView fx:id="missionTable"
                       styleClass="mission-table"
                       prefHeight="400"
                       style="-fx-text-fill: black; -fx-font-size: 14px; -fx-font-weight: normal;">
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>

                <columns>
                    <TableColumn fx:id="idColumn" text="ID" prefWidth="80">
                        <graphic>
                            <Label text="#ï¸âƒ£"/>
                        </graphic>
                    </TableColumn>

                    <TableColumn fx:id="descriptionColumn" text="Description" prefWidth="450">
                        <graphic>
                            <Label text="ðŸ“„"/>
                        </graphic>
                    </TableColumn>

                    <TableColumn fx:id="scoreColumn" text="Min Score" prefWidth="120">
                        <graphic>
                            <Label text="ðŸŽ¯"/>
                        </graphic>
                    </TableColumn>

                    <TableColumn fx:id="creatorColumn" text="Creator" prefWidth="120">
                        <graphic>
                            <Label text="ðŸ‘¤"/>
                        </graphic>
                    </TableColumn>

                    <TableColumn fx:id="dateColumn" text="Created" prefWidth="150">
                        <graphic>
                            <Label text="ðŸ“…"/>
                        </graphic>
                    </TableColumn>
                </columns>

                <!-- Empty table placeholder -->
                <placeholder>
                    <VBox styleClass="empty-table-placeholder">
                        <Label text="ðŸ“­" styleClass="empty-table-icon"/>
                        <Label text="No missions available" styleClass="empty-table-text"/>
                        <Label text="Create your first mission to get started" styleClass="empty-table-hint"/>
                    </VBox>
                </placeholder>
            </TableView>
        </VBox>

        <!-- Action Buttons - CENTERED -->
        <HBox alignment="CENTER" style="-fx-spacing: 20px; -fx-padding: 20px 0 0 0;">
            <Button text="âœï¸ Edit Mission"
                    onAction="#editMission"
                    styleClass="edit-button"
                    graphicTextGap="8"/>

            <Button text="ðŸ—‘ï¸ Delete Mission"
                    onAction="#deleteMission"
                    styleClass="delete-button"
                    graphicTextGap="8"/>
        </HBox>

        <!-- Footer Note -->
        <HBox alignment="CENTER" style="-fx-padding: 20px 0 0 0;">
            <Label text="ðŸ’¡ Double-click a mission to submit code â€¢ ðŸ” Use filters to find specific missions"
                   style="-fx-text-fill: #64748b; -fx-font-size: 13px;"/>
        </HBox>
    </VBox>
</StackPane>