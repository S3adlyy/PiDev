<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.shape.Circle?>

<StackPane xmlns="http://javafx.com/javafx/17"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.exemple.grecrutement.RenduAddController"
           stylesheets="@rendu-styles.css"
           style="-fx-background-color: linear-gradient(from 0% 0% to 100% 100%, #0a66c2 0%, #378fe9 50%, #8b5cf6 100%);">

    <!-- Background Circles -->
    <Circle radius="60" styleClass="circle-large" fill="rgba(255,255,255,0.1)">
        <translateY>50</translateY>
        <translateX>-100</translateX>
    </Circle>

    <Circle radius="40" styleClass="circle-medium" fill="rgba(255,255,255,0.08)">
        <translateY>-100</translateY>
        <translateX>150</translateX>
    </Circle>

    <Circle radius="80" styleClass="circle-small" fill="rgba(255,255,255,0.05)">
        <translateY>100</translateY>
        <translateX>200</translateX>
    </Circle>

    <!-- Main Container -->
    <VBox styleClass="main-container">
        <!-- Header Section -->
        <VBox styleClass="header-section" spacing="10">
            <Label text="ðŸ¤– AI Code Submission" styleClass="main-title"/>
            <Label text="Submit Python code for AI evaluation" styleClass="sub-title"/>
        </VBox>

        <!-- Split Layout Container -->
        <HBox styleClass="split-container" spacing="40">
            <!-- LEFT: Form Section -->
            <VBox styleClass="form-section" spacing="25" prefWidth="400">
                <!-- Form Title -->
                <Label text="ðŸ“ Submission Form" styleClass="section-title"/>

                <!-- Form Fields -->
                <VBox spacing="20">
                    <!-- Candidate ID -->
                    <VBox spacing="5">
                        <Label text="ðŸ‘¤ Candidate ID" styleClass="field-label"/>
                        <TextField fx:id="txtCandidatId"
                                   promptText="Enter candidate ID"
                                   styleClass="form-field"/>
                    </VBox>

                    <!-- Mission ID -->
                    <VBox spacing="5">
                        <Label text="ðŸŽ¯ Mission ID" styleClass="field-label"/>
                        <TextField fx:id="txtMissionId"
                                   promptText="Will be auto-filled when you select a mission"
                                   styleClass="form-field"
                                   editable="true"/>
                    </VBox>

                    <!-- Mission Type -->
                    <VBox spacing="5">
                        <Label text="ðŸ“‹ Mission Type" styleClass="field-label"/>
                        <ComboBox fx:id="comboMissionType"
                                  promptText="Select mission type"
                                  styleClass="form-combo"/>
                    </VBox>
                </VBox>

                <!-- Mission Description Display -->
                <VBox spacing="10" style="-fx-padding: 15px 0;">
                    <Label text="ðŸ“„ Mission Details" styleClass="section-title"/>

                    <TextArea fx:id="lblMissionDescription"
                              editable="false"
                              wrapText="true"
                              prefHeight="150"
                              styleClass="mission-description-area"/>
                </VBox>

                <!-- Evaluate Button -->
                <VBox spacing="15" style="-fx-padding: 10px 0;">
                    <Button text="ðŸš€ Evaluate with AI"
                            onAction="#evaluer"
                            styleClass="evaluate-button"
                            prefWidth="220"/>

                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <ProgressIndicator fx:id="progress"
                                           styleClass="progress-indicator"
                                           visible="false"/>
                        <Label fx:id="lblProcessing"
                               text="â³ Processing..."
                               styleClass="processing-label"
                               visible="false"/>
                    </HBox>
                </VBox>

                <!-- Result -->
                <Label fx:id="lblResultat"
                       text="ðŸ‘‰ Waiting for code submission..."
                       styleClass="result-label"
                       wrapText="true"/>
            </VBox>

            <!-- RIGHT: Code Editor Section -->
            <VBox styleClass="editor-section" spacing="15" prefWidth="600">
                <!-- Editor Title -->
                <Label text="ðŸ’» Python Code Editor" styleClass="section-title"/>
                <Label text="Write your solution in Python 3" styleClass="editor-subtitle"/>

                <!-- Code Editor Container -->
                <VBox styleClass="code-editor-container">
                    <!-- Editor Header -->
                    <HBox styleClass="editor-header">
                        <Label text="solution.py" styleClass="file-name"/>
                        <HBox HBox.hgrow="ALWAYS"/>
                        <Label text="Python 3" styleClass="language-tag"/>
                    </HBox>

                    <!-- Code Editor -->
                    <TextArea fx:id="txtCode"
                              promptText="# Write your Python solution here&#10;# Example: Add two numbers&#10;&#10;def add(a, b):&#10;    return a + b&#10;&#10;# Read input and call function&#10;if __name__ == '__main__':&#10;    num1 = int(input())&#10;    num2 = int(input())&#10;    print(add(num1, num2))"
                              styleClass="code-editor"/>
                </VBox>

                <!-- Editor Tips -->
                <HBox styleClass="editor-tips">
                    <Label text="ðŸ’¡ Tips: â€¢ Press Ctrl+Space for autocomplete â€¢ Use Tab for indentation â€¢ Test your code before submitting"
                           styleClass="tip-text"/>
                </HBox>
            </VBox>
        </HBox>

        <!-- Footer -->
        <HBox alignment="CENTER" style="-fx-padding: 20px 0 0 0;">
            <Label text="ðŸ” Tip: Double-click a mission in Mission List to auto-fill mission details"
                   style="-fx-text-fill: #64748b; -fx-font-size: 13px; -fx-font-style: italic;"/>
        </HBox>
    </VBox>
</StackPane>